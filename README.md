# 项目架构说明

本项目是一个基于 Google ADK (Agent Development Kit) 构建的、用于财经分析的多智能体（Multi-Agent）系统。系统通过组合不同角色的智能体和功能强大的工具集，实现复杂财经问题的分析与解答。

## 核心理念

- **多智能体架构 (Multi-Agent Architecture)**: 系统并非使用单一的通用型智能体，而是将复杂任务拆解给多个具有特定角色的专业智能体（如数据分析、信息检索、用户交互等），它们协同工作，以提高分析的深度和准确性。
- **工具增强 (Tool-Augmented)**: 智能体被赋予使用工具的能力。这些工具是标准的Python函数，用于执行获取实时数据、进行数学计算、访问外部API等确定性操作，弥补了大型语言模型在实时性和数据准确性上的不足。
- **提示工程优化 (Prompt Engineering)**: 项目中包含专门用于优化提示词（Prompt）的智能体，旨在将用户的自然语言输入转化为结构化、高效的指令，以便其他智能体能更好地理解和执行任务。

## 模块拆解

- **`main.py`**: 项目的主入口文件。负责初始化环境、加载智能体、接收用户输入，并启动整个智能体工作流。

- **`common/`**: 通用工具模块，存放了可被多个智能体复用的工具。
  - **`finance_tool.py`**: 核心财经工具。可能包含获取股票价格、分析财务报表、计算技术指标等功能。
  - **`search_tool.py`**: 搜索工具。用于从网络或其他数据源检索信息，为财经分析提供新闻、报告等背景资料。
  - **`time_tool.py`**: 时间工具。提供日期和时间功能，这在处理时间序列相关的财经数据时至关重要。

- **`google-sample-agent/`**: 一个基于 Google ADK 的标准智能体实现范例，可作为开发新智能体的模板。

- **`litellm-agent/`**: 集成了 LiteLLM 的智能体。LiteLLM 是一个允许代码与多种大型语言模型（如OpenAI, Cohere, Anthropic等）进行交互的库，这表明本项目的智能体具备切换或同时使用不同LLM后端的灵活性。

- **`multi-agent/`**: 多智能体协作的核心逻辑所在。此模块可能包含一个“主管”（Supervisor）或“协调者”（Orchestrator）智能体，负责将任务分解并分配给合适的“下属”智能体，并对它们的产出进行整合。

- **`prompt-optimizer-agent/`**: 提示词优化智能体。在任务执行的初期介入，对原始用户输入进行分析和改写，生成更清晰、更高效的提示词，供后续的分析智能体使用。

## 工作流程（推测）

1.  **用户输入**: 用户通过 `main.py` 提交一个财经分析请求（例如，“分析一下最近特斯拉的股价趋势和相关新闻”）。
2.  **提示词优化**: `prompt-optimizer-agent` 接收原始请求，将其优化为结构化的任务描述。
3.  **任务分发**: `multi-agent` 中的协调者接收优化后的任务，将其分解为子任务，例如：
    - 子任务1：获取特斯拉近期股价（分配给使用 `finance_tool` 的智能体）。
    - 子任务2：搜索近期关于特斯拉的新闻（分配给使用 `search_tool` 的智能体）。
4.  **任务执行**: 各个被分配任务的智能体调用其专属工具（`finance_tool`, `search_tool` 等）来执行操作并收集数据。
5.  **结果汇总**: 协调者智能体收集所有子任务的结果，进行汇总、整理和分析，形成最终的综合性报告。
6.  **输出**: `main.py` 将最终报告呈现给用户。

